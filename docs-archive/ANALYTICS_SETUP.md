# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ß—Ç–æ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

### –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
- **ID —Å—á–µ—Ç—á–∏–∫–∞**: 106217699
- **–§—É–Ω–∫—Ü–∏–∏**: 
  - ‚úÖ –í–µ–±–≤–∏–∑–æ—Ä (heatmaps, –∑–∞–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π)
  - ‚úÖ –ö–∞—Ä—Ç–∞ –∫–ª–∏–∫–æ–≤
  - ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫
  - ‚úÖ –¢–æ—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–æ–≤
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `index.html` (—Å—Ç—Ä–æ–∫–∏ 79-99)

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

### 1. Google Analytics 4

#### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç GA4
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://analytics.google.com/
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ (Property)
4. –í—ã–±—Ä–∞—Ç—å "Web" platform
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Measurement ID (—Ñ–æ—Ä–º–∞—Ç: `G-XXXXXXXXXX`)

#### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å ID –≤ –∫–æ–¥
–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `src/lib/analytics/googleAnalytics.ts` –∏ –∑–∞–º–µ–Ω–∏—Ç—å:
```typescript
export const GA_MEASUREMENT_ID = 'G-XXXXXXXXXX'; // TODO: Replace with actual GA4 ID
```

–ù–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π ID:
```typescript
export const GA_MEASUREMENT_ID = 'G-ABC123DEF4'; // –í–∞—à —Ä–µ–∞–ª—å–Ω—ã–π ID
```

#### –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å GA4
–û—Ç–∫—Ä—ã—Ç—å `src/main.tsx` –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:
```typescript
import { initGA } from './lib/analytics/googleAnalytics';

// –ü–æ—Å–ª–µ ReactDOM.createRoot
initGA();
```

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
1. –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Console
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "Google Analytics 4 initialized"
4. –í GA4 –∞–¥–º–∏–Ω–∫–µ —á–µ—Ä–µ–∑ 24-48 —á–∞—Å–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

### 2. –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Å–∏–π

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- –ö–ª–∏–∫–∏ –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–º –≤–∏–¥–∂–µ—Ç–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ (–∑–∞—è–≤–∫–∏)
- –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–∞—Ä—Ç–Ω–µ—Ä—É

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ
```typescript
import { trackPartnerClick, trackConversion } from '@/lib/analytics/conversionTracking';

// –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –≤–∏–¥–∂–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞
trackPartnerClick('tinkoff', 'mortgage', 'banner');

// –ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (–∑–∞—è–≤–∫–µ)
trackConversion({
  partner: 'tinkoff',
  productType: 'mortgage',
  calculatorType: 'mortgage',
  value: 5000000, // –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞
});
```

### 3. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
```typescript
import { registerABTest, getVariant } from '@/lib/analytics/abTesting';

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
registerABTest({
  id: 'tinkoff-widget-test',
  name: '–¢–µ—Å—Ç –≤–∏–¥–∂–µ—Ç–∞ –¢–∏–Ω—å–∫–æ—Ñ—Ñ',
  variants: [
    {
      id: 'control',
      name: '–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è',
      weight: 50, // 50% —Ç—Ä–∞—Ñ–∏–∫–∞
      config: { buttonColor: 'blue', text: '–û—Ñ–æ—Ä–º–∏—Ç—å –∏–ø–æ—Ç–µ–∫—É' }
    },
    {
      id: 'variant-a',
      name: '–í–∞—Ä–∏–∞–Ω—Ç A',
      weight: 50, // 50% —Ç—Ä–∞—Ñ–∏–∫–∞
      config: { buttonColor: 'green', text: '–ü–æ–ª—É—á–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ' }
    }
  ],
  startDate: new Date('2026-01-15'),
  active: true
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const variant = getVariant('tinkoff-widget-test');
if (variant) {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å config –≤–∞—Ä–∏–∞–Ω—Ç–∞
  const { buttonColor, text } = variant.config;
}
```

#### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
```typescript
import { trackImpression, trackClick, trackConversion } from '@/lib/analytics/abTesting';

// –ü—Ä–∏ –ø–æ–∫–∞–∑–µ –≤–∏–¥–∂–µ—Ç–∞
trackImpression('tinkoff-widget-test', variant.id);

// –ü—Ä–∏ –∫–ª–∏–∫–µ
trackClick('tinkoff-widget-test', variant.id);

// –ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
trackConversion('tinkoff-widget-test', variant.id);
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```typescript
import { getTestResults, calculateSignificance } from '@/lib/analytics/abTesting';

const results = getTestResults('tinkoff-widget-test');
// results[0] - –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
// results[1] - –≤–∞—Ä–∏–∞–Ω—Ç A

const significance = calculateSignificance(results[0], results[1]);
console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ:', significance.significant);
console.log('P-value:', significance.pValue);
```

### 4. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ä–æ—É—Ç–∏–Ω–≥
–û—Ç–∫—Ä—ã—Ç—å `src/App.tsx` –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç:
```typescript
import { AnalyticsDashboard } from '@/components/analytics/AnalyticsDashboard';

// –í routes
{
  path: '/admin/analytics',
  element: <AnalyticsDashboard />
}
```

#### –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥—É
–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞: `https://schitay-online.ru/admin/analytics`

**–§—É–Ω–∫—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞:**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–∞—Ä—Ç–Ω–µ—Ä—É
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ

#### –¶–µ–ª–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
1. **–ö–ª–∏–∫ –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–º—É –≤–∏–¥–∂–µ—Ç—É**
   - –¢–∏–ø: JavaScript —Å–æ–±—ã—Ç–∏–µ
   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: `partner_click`

2. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è (–∑–∞—è–≤–∫–∞)**
   - –¢–∏–ø: JavaScript —Å–æ–±—ã—Ç–∏–µ
   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: `conversion`

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞**
   - –¢–∏–ø: JavaScript —Å–æ–±—ã—Ç–∏–µ
   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä: `calculator_interaction`

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–π
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –¶–µ–ª–∏
2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å"
3. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø "JavaScript —Å–æ–±—ã—Ç–∏–µ"
4. –í–≤–µ—Å—Ç–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **CTR –≤–∏–¥–∂–µ—Ç–æ–≤**: –ö–ª–∏–∫–∏ / –ü–æ–∫–∞–∑—ã √ó 100%
- **Conversion Rate**: –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ / –ö–ª–∏–∫–∏ √ó 100%
- **–°—Ä–µ–¥–Ω–∏–π —á–µ–∫**: –°—É–º–º–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- **ROI –ø–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º**: (–î–æ—Ö–æ–¥ - –ó–∞—Ç—Ä–∞—Ç—ã) / –ó–∞—Ç—Ä–∞—Ç—ã √ó 100%

### –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º (–¢–∏–Ω—å–∫–æ—Ñ—Ñ, –í–¢–ë, –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫ –∏ —Ç.–¥.)
- –ü–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º (–∏–ø–æ—Ç–µ–∫–∞, –∫—Ä–µ–¥–∏—Ç, –≤–∫–ª–∞–¥, —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ)
- –ü–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º (–∏–ø–æ—Ç–µ—á–Ω—ã–π, –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –∏ —Ç.–¥.)
- –ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Ç—Ä–∞—Ñ–∏–∫–∞ (–æ—Ä–≥–∞–Ω–∏–∫–∞, —Ä–µ–∫–ª–∞–º–∞, —Å–æ—Ü—Å–µ—Ç–∏)

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π

#### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É
ym(106217699, 'reachGoal', 'test_goal');

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Analytics
gtag('event', 'test_event', { test_param: 'test_value' });
```

#### –í DevTools ‚Üí Network:
- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –∑–∞–ø—Ä–æ—Å—ã –∫ `mc.yandex.ru`
- Google Analytics: –∑–∞–ø—Ä–æ—Å—ã –∫ `google-analytics.com`

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
```
GA4: Event tracked calculator_interaction { calculator_type: 'mortgage', action: 'calculate' }
Yandex Metrika: goal tracked partner_click { partner: 'tinkoff', calculator: 'mortgage' }
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google Analytics 4 (–¥–æ–±–∞–≤–∏—Ç—å Measurement ID)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ü–µ–ª–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å A/B —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤
5. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –≤–∏–¥–∂–µ—Ç—ã
6. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –ö–ª–∏–∫–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage`
- –ú–∞–∫—Å–∏–º—É–º 100 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JSON

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- –ù–µ —Å–æ–±–∏—Ä–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–Ω–æ–Ω–∏–º–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–µ—Å—Å–∏–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç GDPR –∏ –∑–∞–∫–æ–Ω–∞–º –†–§

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- –ù–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –û—à–∏–±–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
