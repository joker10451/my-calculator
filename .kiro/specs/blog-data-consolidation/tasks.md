# План реализации: Консолидация данных блога

## Обзор

Этот план описывает пошаговую реализацию консолидации данных блога для устранения дублирования 9 файлов с данными статей и создания единой, хорошо структурированной системы.

## Задачи

### 1. Анализ текущего состояния данных

- [ ] 1.1 Создать утилиту анализа данных блога
  - Сканировать все файлы blogPosts*.ts
  - Подсчитать общее количество статей
  - Выявить дубликаты по ID и slug
  - Проверить соответствие типу BlogPost
  - _Требования: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ] 1.2 Запустить анализ и создать отчет
  - Выполнить анализ всех файлов данных
  - Создать детальный отчет о состоянии данных
  - Выявить проблемные статьи
  - _Требования: 1.1, 1.2, 1.3, 1.4_

### 2. Создание утилит консолидации

- [ ] 2.1 Создать утилиту дедупликации статей
  - Реализовать алгоритм удаления дубликатов
  - Добавить приоритизацию по дате обновления
  - Создать функцию валидации данных
  - _Требования: 2.1, 2.2, 2.3_

- [ ] 2.2 Создать утилиту санитизации данных
  - Реализовать автоматическое исправление отсутствующих полей
  - Добавить генерацию значений по умолчанию
  - Создать валидацию структуры данных
  - _Требования: 2.2, 2.3, 2.4_

- [ ] 2.3 Создать основную утилиту консолидации
  - Объединить все утилиты в единый процесс
  - Добавить логирование и отчетность
  - Реализовать обработку ошибок
  - _Требования: 2.1, 2.2, 2.3, 2.4, 2.5_

### 3. Тестирование утилит консолидации

- [ ] 3.1 Написать unit тесты для утилит
  - Тестировать анализ данных
  - Тестировать дедупликацию
  - Тестировать санитизацию
  - _Требования: 2.1, 2.2, 2.3_

- [ ] 3.2 Провести тестирование на копии данных
  - Создать копию всех файлов данных
  - Запустить консолидацию на тестовых данных
  - Проверить результаты консолидации
  - _Требования: 2.1, 2.2, 2.3, 2.4_

### 4. Создание новой структуры данных

- [ ] 4.1 Создать директорию src/data/blog/
  - Создать новую структуру папок
  - Подготовить файлы для консолидированных данных
  - _Требования: 2.1, 2.2_

- [ ] 4.2 Выполнить консолидацию данных
  - Запустить утилиту консолидации на реальных данных
  - Создать articles.json с консолидированными данными
  - Проверить целостность результата
  - _Требования: 2.1, 2.2, 2.3, 2.4, 2.5_

- [ ] 4.3 Создать TypeScript модуль экспорта
  - Создать src/data/blog/index.ts
  - Реализовать типизированный экспорт данных
  - Добавить сортировку по дате публикации
  - _Требования: 2.1, 2.2, 2.5_

### 5. Обновление системы импортов

- [ ] 5.1 Обновить основной файл blogPosts.ts
  - Изменить импорт на новую консолидированную структуру
  - Убрать импорты из старых файлов
  - Сохранить обратную совместимость экспорта
  - _Требования: 5.1, 5.2, 5.5_

- [ ] 5.2 Проверить все компоненты блога
  - Убедиться что BlogPage корректно получает данные
  - Проверить BlogPostPage и BlogCategoryPage
  - Протестировать EnhancedBlogCard
  - _Требования: 5.2, 5.3, 5.5_

- [ ] 5.3 Проверить TypeScript компиляцию
  - Убедиться в отсутствии ошибок типизации
  - Проверить все импорты blogPosts
  - Исправить возможные проблемы
  - _Требования: 5.4, 5.5_

### 6. Тестирование функциональности

- [ ] 6.1 Протестировать отображение статей
  - Проверить главную страницу блога
  - Убедиться что все статьи отображаются
  - Проверить корректность данных статей
  - _Требования: 4.4, 5.5_

- [ ] 6.2 Протестировать фильтрацию и поиск
  - Проверить фильтрацию по категориям
  - Протестировать фильтрацию по тегам
  - Убедиться что поиск работает корректно
  - _Требования: 4.5, 5.5_

- [ ] 6.3 Протестировать рекомендуемые статьи
  - Проверить отображение featured статей
  - Убедиться в корректности сортировки
  - Протестировать последние публикации
  - _Требования: 4.4, 5.5_

### 7. Создание резервных копий и очистка

- [x] 7.1 Создать резервные копии старых файлов
  - Создать папку backup/ с датой
  - Скопировать все старые файлы данных
  - Добавить backup/ в .gitignore
  - _Требования: 3.1, 3.2_

- [x] 7.2 Удалить дублирующиеся файлы
  - Удалить blogPostsNew*.ts файлы
  - Удалить blogArticlesGenerated*.ts файлы
  - Оставить только основной blogPosts.ts
  - _Требования: 3.2, 3.3, 3.4_

- [x] 7.3 Финальная проверка системы
  - Запустить полную сборку проекта
  - Протестировать все функции блога
  - Убедиться в отсутствии ошибок
  - _Требования: 3.3, 4.4, 4.5_

### 8. Создание утилиты миграции для будущего

- [ ] 8.1 Создать переиспользуемую утилиту миграции
  - Создать src/utils/migrateBlogData.ts
  - Реализовать универсальную функцию миграции
  - Добавить поддержку различных форматов данных
  - _Требования: 6.1, 6.2, 6.3_

- [ ] 8.2 Создать CLI скрипт для миграции
  - Создать scripts/migrate-blog-data.ts
  - Добавить интерфейс командной строки
  - Реализовать интерактивные опции
  - _Требования: 6.1, 6.4, 6.5_

- [ ] 8.3 Документировать процесс миграции
  - Создать README для утилиты миграции
  - Добавить примеры использования
  - Описать возможные сценарии миграции
  - _Требования: 6.5_

### 9. Checkpoint - Проверка результатов

- [ ] 9.1 Убедиться что все тесты проходят
  - Запустить все unit тесты
  - Проверить integration тесты
  - Убедиться в отсутствии регрессий
  - _Требования: все_

- [ ] 9.2 Создать отчет о консолидации
  - Подсчитать количество объединенных статей
  - Зафиксировать удаленные дубликаты
  - Создать сводку изменений
  - _Требования: 6.5_

## Примечания

- Задачи выполняются последовательно для обеспечения стабильности
- Каждый этап включает тестирование перед переходом к следующему
- Резервные копии создаются перед любыми деструктивными операциями
- Все изменения должны сохранять обратную совместимость
- При возникновении проблем предусмотрен откат к предыдущему состоянию

## Ожидаемые результаты

После выполнения всех задач:

- ✅ Единый файл с данными всех статей блога
- ✅ Удалены 8 дублирующихся файлов данных
- ✅ Упрощена поддержка и добавление новых статей
- ✅ Улучшена производительность загрузки данных
- ✅ Создана система для будущих миграций данных
- ✅ Сохранена полная функциональность блога
- ✅ Отсутствуют ошибки компиляции и выполнения